panel.grid.minor = element_line(color = "grey90", size = 0.2),
axis.line = element_line(color = "black", size = 0.8),
axis.ticks = element_line(color = "black", size = 0.5),
legend.title = element_blank(),
legend.position = "top"
)
# Show plot
print(p)
# Save high-res image
ggsave(
"/Users/ksanaka/Desktop/Research/Osteomyelitis/Figures/AAMR_Sex_Trend_Plot.png",
plot = p, width = 7, height = 5.5, dpi = 900
)
View(apc_values)
View(male_data)
View(female_data)
source(".Rprofile")
# Load race-specific datasets
white_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Race_Mortality_Trend.xlsx", sheet = "White")
black_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Race_Mortality_Trend.xlsx", sheet = "Black")
hispanic_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Race_Mortality_Trend.xlsx", sheet = "Hispanic")
asian_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Race_Mortality_Trend.xlsx", sheet = "Asian")
native_data   <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Race_Mortality_Trend.xlsx", sheet = "Native American")
# Add race group labels
white_data    <- white_data    %>% mutate(AAMR = as.numeric(AAMR), Race = "White")
black_data    <- black_data    %>% mutate(AAMR = as.numeric(AAMR), Race = "Black")
hispanic_data <- hispanic_data %>% mutate(AAMR = as.numeric(AAMR), Race = "Hispanic")
asian_data    <- asian_data    %>% mutate(AAMR = as.numeric(AAMR), Race = "Asian")
native_data   <- native_data   %>% mutate(AAMR = as.numeric(AAMR), Race = "Native American")
# Combine all into one dataset
combined_data <- bind_rows(white_data, black_data, hispanic_data, asian_data, native_data)
# Fit log models and calculate APC, 95% CI, and p-value
apc_values <- combined_data %>%
group_by(Race) %>%
do({
model <- lm(log(AAMR) ~ Year, data = .)
summary_model <- summary(model)
conf_int <- confint(model)["Year", ]
beta1 <- coef(model)["Year"]
APC       <- (exp(beta1) - 1) * 100
APC_lower <- (exp(conf_int[1]) - 1) * 100
APC_upper <- (exp(conf_int[2]) - 1) * 100
p_value   <- summary_model$coefficients["Year", "Pr(>|t|)"]
data.frame(
APC = APC,
APC_lower = APC_lower,
APC_upper = APC_upper,
p_value = p_value
)
}) %>%
ungroup()
# Create annotation positions for APC labels (adjust Y values manually based on your scale)
label_y_positions <- c(
"White" = 3.75,
"Black" = 3.5,
"Hispanic" = 3.25,
"Asian" = 3,
"Native American" = 2.75
)
# Merge with label positions
apc_labels <- apc_values %>%
mutate(
label = paste0("APC (", Race, "): ", round(APC, 2), "%"),
label_x = min(combined_data$Year) + 1,
label_y = label_y_positions[Race]
)
# Define custom color and shape palettes
race_colors <- c(
"White" = "#1f77b4",
"Black" = "#d62728",
"Hispanic" = "#2ca02c",
"Asian" = "#9467bd",
"Native American" = "#ff7f0e"
)
race_shapes <- c(
"White" = 21,
"Black" = 22,
"Hispanic" = 23,
"Asian" = 24,
"Native American" = 25
)
# Build the plot
p <- ggplot(combined_data, aes(x = Year, y = AAMR, color = Race, shape = Race, fill = Race)) +
geom_point(size = 3, stroke = 1.1) +
geom_smooth(method = "lm", se = FALSE, size = 1.1, linetype = "solid", show.legend = FALSE) +
geom_text(data = apc_labels,
aes(x = label_x, y = label_y, label = label, color = Race),
hjust = 0, size = 5, fontface = "italic", inherit.aes = FALSE) +
scale_color_manual(values = race_colors) +
scale_fill_manual(values = race_colors) +
scale_shape_manual(values = race_shapes) +
scale_x_continuous(breaks = pretty_breaks(n = 6)) +
scale_y_continuous(breaks = pretty_breaks(n = 6)) +
labs(
x = "Year",
y = "AAMR (per 100,000)"
) +
theme_minimal(base_family = "Helvetica", base_size = 14) +
theme(
axis.title = element_text(face = "bold", size = 14),
axis.text = element_text(size = 12),
panel.grid.major = element_line(color = "grey85", size = 0.4),
panel.grid.minor = element_line(color = "grey90", size = 0.2),
axis.line = element_line(color = "black", size = 0.8),
axis.ticks = element_line(color = "black", size = 0.5),
legend.title = element_blank(),
legend.position = "top"
)
# Show plot
print(p)
# Save high-res image
ggsave(
"/Users/ksanaka/Desktop/Research/Osteomyelitis/Figures/AAMR_Race_Trend_Plot.png",
plot = p, width = 7, height = 6, dpi = 900
)
View(apc_values)
source(".Rprofile")
# Load age-specific data
young_data  <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "<35")
middle_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "35-64")
old_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "65+")
# Ensure Crude is numeric and label age groups
young_data  <- young_data  %>% mutate(Crude = as.numeric(Crude), AgeGroup = "0–34")
middle_data <- middle_data %>% mutate(Crude = as.numeric(Crude), AgeGroup = "35–64")
old_data    <- old_data    %>% mutate(Crude = as.numeric(Crude), AgeGroup = "65+")
# Combine all into one dataset
combined_data <- bind_rows(young_data, middle_data, old_data)
# Calculate APC, 95% CI, and p-value per age group
apc_values <- combined_data %>%
group_by(AgeGroup) %>%
do({
model <- lm(log(Crude) ~ Year, data = .)
summary_model <- summary(model)
conf_int <- confint(model)["Year", ]
beta1 <- coef(model)["Year"]
APC <- (exp(beta1) - 1) * 100
APC_lower <- (exp(conf_int[1]) - 1) * 100
APC_upper <- (exp(conf_int[2]) - 1) * 100
p_value <- summary_model$coefficients["Year", "Pr(>|t|)"]
data.frame(
APC = APC,
APC_lower = APC_lower,
APC_upper = APC_upper,
p_value = p_value
)
}) %>%
ungroup()
rm(list = ls())
source(".Rprofile")
# Load age-specific data
young_data  <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "<35")
middle_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "35-64")
old_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "65+")
# Ensure Crude is numeric and label age groups
young_data  <- young_data  %>% mutate(Crude = as.numeric(Crude), AgeGroup = "0–34")
middle_data <- middle_data %>% mutate(Crude = as.numeric(Crude), AgeGroup = "35–64")
old_data    <- old_data    %>% mutate(Crude = as.numeric(Crude), AgeGroup = "65+")
# Combine all into one dataset
combined_data <- bind_rows(young_data, middle_data, old_data)
# Calculate APC, 95% CI, and p-value per age group
apc_values <- combined_data %>%
group_by(AgeGroup) %>%
do({
model <- lm(log(Crude) ~ Year, data = .)
summary_model <- summary(model)
conf_int <- confint(model)["Year", ]
beta1 <- coef(model)["Year"]
APC <- (exp(beta1) - 1) * 100
APC_lower <- (exp(conf_int[1]) - 1) * 100
APC_upper <- (exp(conf_int[2]) - 1) * 100
p_value <- summary_model$coefficients["Year", "Pr(>|t|)"]
data.frame(
APC = APC,
APC_lower = APC_lower,
APC_upper = APC_upper,
p_value = p_value
)
}) %>%
ungroup()
source(".Rprofile")
# Load age-specific data
young_data  <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "<35")
middle_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "35-64")
old_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "65+")
# Ensure Crude is numeric and label age groups
young_data  <- young_data  %>% mutate(Crude = as.numeric(Crude), AgeGroup = "0–34")
middle_data <- middle_data %>% mutate(Crude = as.numeric(Crude), AgeGroup = "35–64")
old_data    <- old_data    %>% mutate(Crude = as.numeric(Crude), AgeGroup = "65+")
# Combine all into one dataset
combined_data <- bind_rows(young_data, middle_data, old_data)
# Calculate APC, 95% CI, and p-value per age group
apc_values <- combined_data %>%
group_by(AgeGroup) %>%
do({
model <- lm(log(Crude) ~ Year, data = .)
summary_model <- summary(model)
conf_int <- confint(model)["Year", ]
beta1 <- coef(model)["Year"]
APC <- (exp(beta1) - 1) * 100
APC_lower <- (exp(conf_int[1]) - 1) * 100
APC_upper <- (exp(conf_int[2]) - 1) * 100
p_value <- summary_model$coefficients["Year", "Pr(>|t|)"]
data.frame(
APC = APC,
APC_lower = APC_lower,
APC_upper = APC_upper,
p_value = p_value
)
}) %>%
ungroup()
# Manually assign label positions (adjust y-values for spacing)
label_y_positions <- c(
"0–34" = 12,
"35–64" = 11,
"65+"   = 10
)
# Format APC labels
apc_labels <- apc_values %>%
mutate(
label = paste0("APC (", AgeGroup, "): ", round(APC, 2), "%"),
label_x = min(combined_data$Year) + 1,
label_y = label_y_positions[AgeGroup]
)
# Define color/shape mappings
age_colors <- c("0–34" = "#1f77b4", "35–64" = "#2ca02c", "65+" = "#d62728")
age_shapes <- c("0–34" = 21, "35–64" = 22, "65+" = 24)
# Build plot
p <- ggplot(combined_data, aes(x = Year, y = Crude, color = AgeGroup, shape = AgeGroup, fill = AgeGroup)) +
geom_point(size = 3, stroke = 1.1) +
geom_smooth(method = "lm", se = FALSE, size = 1.1, show.legend = FALSE) +
geom_text(data = apc_labels,
aes(x = label_x, y = label_y, label = label, color = AgeGroup),
hjust = 0, size = 5, fontface = "italic", inherit.aes = FALSE) +
scale_color_manual(values = age_colors) +
scale_fill_manual(values = age_colors) +
scale_shape_manual(values = age_shapes) +
scale_x_continuous(breaks = pretty_breaks(n = 6)) +
scale_y_continuous(breaks = pretty_breaks(n = 6)) +
labs(
x = "Year",
y = "Crude (per 100,000)"
) +
theme_minimal(base_family = "Helvetica", base_size = 14) +
theme(
axis.title = element_text(face = "bold", size = 14),
axis.text = element_text(size = 12),
panel.grid.major = element_line(color = "grey85", size = 0.4),
panel.grid.minor = element_line(color = "grey90", size = 0.2),
axis.line = element_line(color = "black", size = 0.8),
axis.ticks = element_line(color = "black", size = 0.5),
legend.title = element_blank(),
legend.position = "top"
)
# Show plot
print(p)
# Save high-res plot
ggsave(
"/Users/ksanaka/Desktop/Research/Osteomyelitis/Figures/Crude_AgeGroup_Trend_Plot.png",
plot = p, width = 7, height = 6, dpi = 900
)
rm(list = ls())
source(".Rprofile")
# Load age-specific data
young_data  <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "<35")
middle_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "35-64")
old_data    <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Age_Mortality_Trend.xlsx", sheet = "65+")
# Ensure Crude is numeric and label age groups
young_data  <- young_data  %>% mutate(Crude = as.numeric(Crude), AgeGroup = "0–34")
middle_data <- middle_data %>% mutate(Crude = as.numeric(Crude), AgeGroup = "35–64")
old_data    <- old_data    %>% mutate(Crude = as.numeric(Crude), AgeGroup = "65+")
# Combine all into one dataset
combined_data <- bind_rows(young_data, middle_data, old_data)
# Calculate APC, 95% CI, and p-value per age group
apc_values <- combined_data %>%
group_by(AgeGroup) %>%
do({
model <- lm(log(Crude) ~ Year, data = .)
summary_model <- summary(model)
conf_int <- confint(model)["Year", ]
beta1 <- coef(model)["Year"]
APC <- (exp(beta1) - 1) * 100
APC_lower <- (exp(conf_int[1]) - 1) * 100
APC_upper <- (exp(conf_int[2]) - 1) * 100
p_value <- summary_model$coefficients["Year", "Pr(>|t|)"]
data.frame(
APC = APC,
APC_lower = APC_lower,
APC_upper = APC_upper,
p_value = p_value
)
}) %>%
ungroup()
# Manually assign label positions (adjust y-values for spacing)
label_y_positions <- c(
"0–34" = 12,
"35–64" = 11,
"65+"   = 10
)
# Format APC labels
apc_labels <- apc_values %>%
mutate(
label = paste0("APC (", AgeGroup, "): ", round(APC, 2), "%"),
label_x = min(combined_data$Year) + 1,
label_y = label_y_positions[AgeGroup]
)
# Define color/shape mappings
age_colors <- c("0–34" = "#1f77b4", "35–64" = "#2ca02c", "65+" = "#d62728")
age_shapes <- c("0–34" = 21, "35–64" = 22, "65+" = 24)
# Build plot
p <- ggplot(combined_data, aes(x = Year, y = Crude, color = AgeGroup, shape = AgeGroup, fill = AgeGroup)) +
geom_point(size = 3, stroke = 1.1) +
geom_smooth(method = "lm", se = FALSE, size = 1.1, show.legend = FALSE) +
geom_text(data = apc_labels,
aes(x = label_x, y = label_y, label = label, color = AgeGroup),
hjust = 0, size = 5, fontface = "italic", inherit.aes = FALSE) +
scale_color_manual(values = age_colors) +
scale_fill_manual(values = age_colors) +
scale_shape_manual(values = age_shapes) +
scale_x_continuous(breaks = pretty_breaks(n = 6)) +
scale_y_continuous(breaks = pretty_breaks(n = 6)) +
labs(
x = "Year",
y = "Crude (per 100,000)"
) +
theme_minimal(base_family = "Helvetica", base_size = 14) +
theme(
axis.title = element_text(face = "bold", size = 14),
axis.text = element_text(size = 12),
panel.grid.major = element_line(color = "grey85", size = 0.4),
panel.grid.minor = element_line(color = "grey90", size = 0.2),
axis.line = element_line(color = "black", size = 0.8),
axis.ticks = element_line(color = "black", size = 0.5),
legend.title = element_blank(),
legend.position = "top"
)
# Show plot
print(p)
# Save high-res plot
ggsave(
"/Users/ksanaka/Desktop/Research/Osteomyelitis/Figures/Crude_AgeGroup_Trend_Plot.png",
plot = p, width = 7, height = 6, dpi = 900
)
View(apc_values)
# Clean environment
rm(list = ls())
source(".Rprofile")
# Load comorbidity data
diabetes_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Diabetes_Mortality_Trend.xlsx", sheet = "Analyzable")
pvd_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_PVD_Mortality_Trend.xlsx", sheet = "Analyzable")
trauma_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Trauma_Mortality_Trend.xlsx", sheet = "Analyzable")
ulcer_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Ulcer_Mortality_Trend.xlsx", sheet = "Analyzable")
vertebral_data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Vertebral_Mortality_Trend.xlsx", sheet = "Analyzable")
# Add group labels
diabetes_data   <- diabetes_data   %>% mutate(AAMR = as.numeric(AAMR), Group = "Diabetes")
pvd_data        <- pvd_data        %>% mutate(AAMR = as.numeric(AAMR), Group = "Peripheral Vascular Disease")
trauma_data     <- trauma_data     %>% mutate(AAMR = as.numeric(AAMR), Group = "Trauma")
ulcer_data      <- ulcer_data      %>% mutate(AAMR = as.numeric(AAMR), Group = "Decubitus Ulcer")
vertebral_data  <- vertebral_data  %>% mutate(AAMR = as.numeric(AAMR), Group = "Vertebral")
# Combine data
data_plot1 <- bind_rows(diabetes_data, pvd_data)
data_plot2 <- bind_rows(trauma_data, ulcer_data, vertebral_data)
# Function to create APC plot and return stats
create_apc_plot <- function(df, save_path, label_y_vals) {
# APC calculation with CI and p-value
apc_values <- df %>%
dplyr::filter(!is.na(AAMR), AAMR > 0) %>%
dplyr::group_by(Group) %>%
group_split() %>%
map_df(function(group_df) {
group_name <- unique(group_df$Group)
model <- lm(log(AAMR) ~ Year, data = group_df)
summary_model <- summary(model)
conf_int <- confint(model)["Year", ]
beta1 <- coef(model)["Year"]
APC <- (exp(beta1) - 1) * 100
APC_lower <- (exp(conf_int[1]) - 1) * 100
APC_upper <- (exp(conf_int[2]) - 1) * 100
p_value <- summary_model$coefficients["Year", "Pr(>|t|)"]
data.frame(
Group = group_name,
APC = APC,
APC_lower = APC_lower,
APC_upper = APC_upper,
p_value = p_value
)
})
# Prepare label positions
apc_labels <- apc_values %>%
mutate(
label = paste0(
"APC (", Group, "): ",
round(APC, 2), "%"
),
label_x = min(df$Year, na.rm = TRUE) + 1,
label_y = label_y_vals[Group]
)
# Colors and shapes
group_names <- unique(df$Group)
color_palette <- brewer.pal(n = length(group_names), name = "Dark2")
names(color_palette) <- group_names
shape_palette <- c(21, 22, 24)[1:length(group_names)]
names(shape_palette) <- group_names
# Plot
p <- ggplot(df, aes(x = Year, y = AAMR, color = Group, shape = Group, fill = Group)) +
geom_point(size = 3, stroke = 1.1) +
geom_smooth(method = "lm", se = FALSE, size = 1.1, show.legend = FALSE) +
geom_text(data = apc_labels,
aes(x = label_x, y = label_y, label = label, color = Group),
hjust = 0, size = 5, fontface = "italic", inherit.aes = FALSE) +
scale_color_manual(values = color_palette) +
scale_fill_manual(values = color_palette) +
scale_shape_manual(values = shape_palette) +
scale_x_continuous(breaks = pretty_breaks(n = 6)) +
scale_y_continuous(breaks = pretty_breaks(n = 6)) +
labs(x = "Year", y = "AAMR (per 100,000)") +
theme_minimal(base_family = "Helvetica", base_size = 14) +
theme(
plot.title = element_blank(),
axis.title = element_text(face = "bold", size = 14),
axis.text = element_text(size = 12),
panel.grid.major = element_line(color = "grey85", size = 0.4),
panel.grid.minor = element_line(color = "grey90", size = 0.2),
axis.line = element_line(color = "black", size = 0.8),
axis.ticks = element_line(color = "black", size = 0.5),
legend.title = element_blank(),
legend.position = "top"
)
# Save plot
ggsave(save_path, plot = p, width = 7.5, height = 6, dpi = 900)
# Return plot and APC stats
return(list(plot = p, apc_stats = apc_values))
}
# Label positions for plot 1
label_y_1 <- c(
"Diabetes" = 0.7,
"Peripheral Vascular Disease" = 0.5
)
# Label positions for plot 2
label_y_2 <- c(
"Trauma" = 0.7,
"Decubitus Ulcer" = 0.6,
"Vertebral" = 0.5
)
# Generate plots and APC tables
result1 <- create_apc_plot(
df = data_plot1,
save_path = "/Users/ksanaka/Desktop/Research/Osteomyelitis/Figures/AAMR_Comorbidities_Plot1.png",
label_y_vals = label_y_1
)
plot1 <- result1$plot
apc1 <- result1$apc_stats
result2 <- create_apc_plot(
df = data_plot2,
save_path = "/Users/ksanaka/Desktop/Research/Osteomyelitis/Figures/AAMR_Comorbidities_Plot2.png",
label_y_vals = label_y_2
)
plot2 <- result2$plot
apc2 <- result2$apc_stats
# Display plots
print(plot1)
print(plot2)
# Save APC tables as CSV
write_csv(apc1, "/Users/ksanaka/Desktop/Research/Osteomyelitis/Writing/APC_Table_Comorbidities_Plot1.csv")
write_csv(apc2, "/Users/ksanaka/Desktop/Research/Osteomyelitis/Writing/APC_Table_Comorbidities_Plot2.csv")
View(apc1)
View(apc2)
0.59/0.42
0.42/0.59
1.06/1.84
0.97/0.45
2.54/1.38
0.39/0.45
0.92/1.38
0.37/1.38
2.33/1.38
0.005/0.58
2.61/0.15
6.91/0.58
0.53/0.58
1.6/1.42
0.47/0.58
1.47/1.42
0.41/0.58
1.02/1.42
rm(list = ls())
source(".Rprofile")
# Load the data
data <- read_excel("/Users/ksanaka/Desktop/Research/Osteomyelitis/Data/Osteomyelitis_Underlying_Mortality_Trend.xlsx",
sheet = "Analyzable")
# Subset the data
data_1999_2015 <- subset(data, Year >= 1999 & Year <= 2015)
data_2016_2023 <- subset(data, Year >= 2016 & Year <= 2023)
# Linear model for 1999–2015
model_1999_2015 <- lm(log(AAMR) ~ Year, data = data_1999_2015)
beta1_1999_2015 <- coef(model_1999_2015)["Year"]
APC_1999_2015 <- (exp(beta1_1999_2015) - 1) * 100
se_1999_2015 <- summary(model_1999_2015)$coefficients["Year", "Std. Error"]
lower_1999_2015 <- (exp(beta1_1999_2015 - 1.96 * se_1999_2015) - 1) * 100
upper_1999_2015 <- (exp(beta1_1999_2015 + 1.96 * se_1999_2015) - 1) * 100
tidy(model_1999_2015)
# Linear model for 2016–2023
model_2016_2023 <- lm(log(AAMR) ~ Year, data = data_2016_2023)
beta1_2016_2023 <- coef(model_2016_2023)["Year"]
APC_2016_2023 <- (exp(beta1_2016_2023) - 1) * 100
se_2016_2023 <- summary(model_2016_2023)$coefficients["Year", "Std. Error"]
lower_2016_2023 <- (exp(beta1_2016_2023 - 1.96 * se_2016_2023) - 1) * 100
upper_2016_2023 <- (exp(beta1_2016_2023 + 1.96 * se_2016_2023) - 1) * 100
tidy(model_2016_2023)
# Print APCs
cat("APC 1999–2015:", round(APC_1999_2015, 2), "% (95% CI:", round(lower_1999_2015, 2), "to", round(upper_1999_2015, 2), ")\n")
cat("APC 2016–2023:", round(APC_2016_2023, 2), "% (95% CI:", round(lower_2016_2023, 2), "to", round(upper_2016_2023, 2), ")\n")
rm(list = ls())
